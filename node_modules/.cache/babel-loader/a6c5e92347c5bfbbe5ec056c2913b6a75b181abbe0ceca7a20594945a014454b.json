{"ast":null,"code":"import _slicedToArray from\"C:/Users/Alexander/Desktop/Projects/store/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{Link,useNavigate}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import styles from'../../styles/Header.module.css';import{ROUTES}from'../../utils/routes';import LOGO from'../../images/logo.svg';import AVATAR from'../../images/avatar.jpg';import{toggleForm}from'../../store/user/userSlice';import{useGetProductsQuery}from'../../store/api/apiSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=function Header(){var dispatch=useDispatch();var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchValue=_useState2[0],setSearchValue=_useState2[1];var _useSelector=useSelector(function(_ref){var user=_ref.user;return user;}),currentUser=_useSelector.currentUser,cart=_useSelector.cart;var _useState3=useState({name:'Guest',avatar:AVATAR}),_useState4=_slicedToArray(_useState3,2),values=_useState4[0],setValues=_useState4[1];var _useGetProductsQuery=useGetProductsQuery({title:searchValue}),data=_useGetProductsQuery.data,isLoading=_useGetProductsQuery.isLoading;useEffect(function(){if(!currentUser)return;setValues(currentUser);},[currentUser]);var handleClick=function handleClick(){if(!currentUser)dispatch(toggleForm(true));else navigate(ROUTES.PROFILE);};var handleSearch=function handleSearch(_ref2){var value=_ref2.target.value;setSearchValue(value);};return/*#__PURE__*/_jsxs(\"div\",{className:styles.header,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.logo,children:/*#__PURE__*/_jsx(Link,{to:ROUTES.HOME,children:/*#__PURE__*/_jsx(\"img\",{src:LOGO,alt:\"Stuff\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.info,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.user,onClick:handleClick,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.avatar,style:{backgroundImage:\"url(\".concat(values.avatar,\")\")}}),/*#__PURE__*/_jsx(\"div\",{className:styles.username,children:values.name})]}),/*#__PURE__*/_jsxs(\"form\",{className:styles.form,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.icon,children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"\".concat(process.env.PUBLIC_URL,\"/sprite.svg#search\")})})}),/*#__PURE__*/_jsx(\"div\",{className:styles.input,children:/*#__PURE__*/_jsx(\"input\",{type:\"search\",name:\"search\",placeholder:\"Search for anything...\",autoComplete:\"off\",onChange:handleSearch,value:searchValue})}),searchValue&&/*#__PURE__*/_jsx(\"div\",{className:styles.box,children:isLoading?'Loading...':!data.length?'No results':data.map(function(_ref3){var title=_ref3.title,images=_ref3.images,id=_ref3.id;return/*#__PURE__*/_jsxs(Link,{onClick:function onClick(){return setSearchValue('');},to:\"/products/\".concat(id),className:styles.item,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.image,style:{backgroundImage:\"url(\".concat(images[0],\")\")}}),/*#__PURE__*/_jsx(\"div\",{className:styles.title,children:title})]},id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.account,children:[/*#__PURE__*/_jsx(Link,{to:ROUTES.HOME,className:styles.favourites,children:/*#__PURE__*/_jsx(\"svg\",{className:styles['icon-fav'],children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"\".concat(process.env.PUBLIC_URL,\"/sprite.svg#heart\")})})}),/*#__PURE__*/_jsxs(Link,{to:ROUTES.CART,className:styles.cart,children:[/*#__PURE__*/_jsx(\"svg\",{className:styles['icon-cart'],children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"\".concat(process.env.PUBLIC_URL,\"/sprite.svg#bag\")})}),!!cart.length&&/*#__PURE__*/_jsx(\"span\",{className:styles.count,children:cart.length})]})]})]})]});};export default Header;","map":{"version":3,"names":["useEffect","useState","Link","useNavigate","useDispatch","useSelector","styles","ROUTES","LOGO","AVATAR","toggleForm","useGetProductsQuery","jsx","_jsx","jsxs","_jsxs","Header","dispatch","navigate","_useState","_useState2","_slicedToArray","searchValue","setSearchValue","_useSelector","_ref","user","currentUser","cart","_useState3","name","avatar","_useState4","values","setValues","_useGetProductsQuery","title","data","isLoading","handleClick","PROFILE","handleSearch","_ref2","value","target","className","header","children","logo","to","HOME","src","alt","info","onClick","style","backgroundImage","concat","username","form","icon","xlinkHref","process","env","PUBLIC_URL","input","type","placeholder","autoComplete","onChange","box","length","map","_ref3","images","id","item","image","account","favourites","CART","count"],"sources":["C:/Users/Alexander/Desktop/Projects/store/src/components/Header/Header.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport styles from '../../styles/Header.module.css';\r\nimport { ROUTES } from '../../utils/routes';\r\nimport LOGO from '../../images/logo.svg';\r\nimport AVATAR from '../../images/avatar.jpg';\r\nimport { toggleForm } from '../../store/user/userSlice';\r\nimport { useGetProductsQuery } from '../../store/api/apiSlice';\r\n\r\nconst Header = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const { currentUser, cart } = useSelector(({ user }) => user);\r\n  const [values, setValues] = useState({ name: 'Guest', avatar: AVATAR });\r\n  const { data, isLoading } = useGetProductsQuery({ title: searchValue });\r\n  useEffect(() => {\r\n    if (!currentUser) return;\r\n    setValues(currentUser);\r\n  }, [currentUser]);\r\n  const handleClick = () => {\r\n    if (!currentUser) dispatch(toggleForm(true));\r\n    else navigate(ROUTES.PROFILE);\r\n  };\r\n  const handleSearch = ({ target: { value } }) => {\r\n    setSearchValue(value);\r\n  };\r\n  return (\r\n    <div className={styles.header}>\r\n      <div className={styles.logo}>\r\n        <Link to={ROUTES.HOME}>\r\n          <img src={LOGO} alt=\"Stuff\" />\r\n        </Link>\r\n      </div>\r\n      <div className={styles.info}>\r\n        <div className={styles.user} onClick={handleClick}>\r\n          <div\r\n            className={styles.avatar}\r\n            style={{ backgroundImage: `url(${values.avatar})` }}\r\n          />\r\n          <div className={styles.username}>{values.name}</div>\r\n        </div>\r\n        <form className={styles.form}>\r\n          <div className={styles.icon}>\r\n            <svg className=\"icon\">\r\n              <use xlinkHref={`${process.env.PUBLIC_URL}/sprite.svg#search`} />\r\n            </svg>\r\n          </div>\r\n          <div className={styles.input}>\r\n            <input\r\n              type=\"search\"\r\n              name=\"search\"\r\n              placeholder=\"Search for anything...\"\r\n              autoComplete=\"off\"\r\n              onChange={handleSearch}\r\n              value={searchValue}\r\n            />\r\n          </div>\r\n          {searchValue && (\r\n            <div className={styles.box}>\r\n              {isLoading\r\n                ? 'Loading...'\r\n                : !data.length\r\n                ? 'No results'\r\n                : data.map(({ title, images, id }) => {\r\n                    return (\r\n                      <Link\r\n                        onClick={() => setSearchValue('')}\r\n                        key={id}\r\n                        to={`/products/${id}`}\r\n                        className={styles.item}\r\n                      >\r\n                        <div\r\n                          className={styles.image}\r\n                          style={{ backgroundImage: `url(${images[0]})` }}\r\n                        />\r\n                        <div className={styles.title}>{title}</div>\r\n                      </Link>\r\n                    );\r\n                  })}\r\n            </div>\r\n          )}\r\n        </form>\r\n        <div className={styles.account}>\r\n          <Link to={ROUTES.HOME} className={styles.favourites}>\r\n            <svg className={styles['icon-fav']}>\r\n              <use xlinkHref={`${process.env.PUBLIC_URL}/sprite.svg#heart`} />\r\n            </svg>\r\n          </Link>\r\n          <Link to={ROUTES.CART} className={styles.cart}>\r\n            <svg className={styles['icon-cart']}>\r\n              <use xlinkHref={`${process.env.PUBLIC_URL}/sprite.svg#bag`} />\r\n            </svg>\r\n            {!!cart.length && (\r\n              <span className={styles.count}>{cart.length}</span>\r\n            )}\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n"],"mappings":"+HAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,MAAO,CAAAC,MAAM,KAAM,gCAAgC,CACnD,OAASC,MAAM,KAAQ,oBAAoB,CAC3C,MAAO,CAAAC,IAAI,KAAM,uBAAuB,CACxC,MAAO,CAAAC,MAAM,KAAM,yBAAyB,CAC5C,OAASC,UAAU,KAAQ,4BAA4B,CACvD,OAASC,mBAAmB,KAAQ,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/D,GAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CACnB,GAAM,CAAAC,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAc,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAC9B,IAAAgB,SAAA,CAAsClB,QAAQ,CAAC,EAAE,CAAC,CAAAmB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA3CG,WAAW,CAAAF,UAAA,IAAEG,cAAc,CAAAH,UAAA,IAClC,IAAAI,YAAA,CAA8BnB,WAAW,CAAC,SAAAoB,IAAA,KAAG,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,OAAO,CAAAA,IAAI,GAAC,CAArDC,WAAW,CAAAH,YAAA,CAAXG,WAAW,CAAEC,IAAI,CAAAJ,YAAA,CAAJI,IAAI,CACzB,IAAAC,UAAA,CAA4B5B,QAAQ,CAAC,CAAE6B,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAEtB,MAAO,CAAC,CAAC,CAAAuB,UAAA,CAAAX,cAAA,CAAAQ,UAAA,IAAhEI,MAAM,CAAAD,UAAA,IAAEE,SAAS,CAAAF,UAAA,IACxB,IAAAG,oBAAA,CAA4BxB,mBAAmB,CAAC,CAAEyB,KAAK,CAAEd,WAAY,CAAC,CAAC,CAA/De,IAAI,CAAAF,oBAAA,CAAJE,IAAI,CAAEC,SAAS,CAAAH,oBAAA,CAATG,SAAS,CACvBtC,SAAS,CAAC,UAAM,CACd,GAAI,CAAC2B,WAAW,CAAE,OAClBO,SAAS,CAACP,WAAW,CAAC,CACxB,CAAC,CAAE,CAACA,WAAW,CAAC,CAAC,CACjB,GAAM,CAAAY,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CACxB,GAAI,CAACZ,WAAW,CAAEV,QAAQ,CAACP,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,IACxC,CAAAQ,QAAQ,CAACX,MAAM,CAACiC,OAAO,CAAC,CAC/B,CAAC,CACD,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAAC,KAAA,CAA8B,IAAd,CAAAC,KAAK,CAAAD,KAAA,CAAfE,MAAM,CAAID,KAAK,CACrCpB,cAAc,CAACoB,KAAK,CAAC,CACvB,CAAC,CACD,mBACE5B,KAAA,QAAK8B,SAAS,CAAEvC,MAAM,CAACwC,MAAO,CAAAC,QAAA,eAC5BlC,IAAA,QAAKgC,SAAS,CAAEvC,MAAM,CAAC0C,IAAK,CAAAD,QAAA,cAC1BlC,IAAA,CAACX,IAAI,EAAC+C,EAAE,CAAE1C,MAAM,CAAC2C,IAAK,CAAAH,QAAA,cACpBlC,IAAA,QAAKsC,GAAG,CAAE3C,IAAK,CAAC4C,GAAG,CAAC,OAAO,CAAE,CAAC,CAC1B,CAAC,CACJ,CAAC,cACNrC,KAAA,QAAK8B,SAAS,CAAEvC,MAAM,CAAC+C,IAAK,CAAAN,QAAA,eAC1BhC,KAAA,QAAK8B,SAAS,CAAEvC,MAAM,CAACoB,IAAK,CAAC4B,OAAO,CAAEf,WAAY,CAAAQ,QAAA,eAChDlC,IAAA,QACEgC,SAAS,CAAEvC,MAAM,CAACyB,MAAO,CACzBwB,KAAK,CAAE,CAAEC,eAAe,QAAAC,MAAA,CAASxB,MAAM,CAACF,MAAM,KAAI,CAAE,CACrD,CAAC,cACFlB,IAAA,QAAKgC,SAAS,CAAEvC,MAAM,CAACoD,QAAS,CAAAX,QAAA,CAAEd,MAAM,CAACH,IAAI,CAAM,CAAC,EACjD,CAAC,cACNf,KAAA,SAAM8B,SAAS,CAAEvC,MAAM,CAACqD,IAAK,CAAAZ,QAAA,eAC3BlC,IAAA,QAAKgC,SAAS,CAAEvC,MAAM,CAACsD,IAAK,CAAAb,QAAA,cAC1BlC,IAAA,QAAKgC,SAAS,CAAC,MAAM,CAAAE,QAAA,cACnBlC,IAAA,QAAKgD,SAAS,IAAAJ,MAAA,CAAKK,OAAO,CAACC,GAAG,CAACC,UAAU,sBAAqB,CAAE,CAAC,CAC9D,CAAC,CACH,CAAC,cACNnD,IAAA,QAAKgC,SAAS,CAAEvC,MAAM,CAAC2D,KAAM,CAAAlB,QAAA,cAC3BlC,IAAA,UACEqD,IAAI,CAAC,QAAQ,CACbpC,IAAI,CAAC,QAAQ,CACbqC,WAAW,CAAC,wBAAwB,CACpCC,YAAY,CAAC,KAAK,CAClBC,QAAQ,CAAE5B,YAAa,CACvBE,KAAK,CAAErB,WAAY,CACpB,CAAC,CACC,CAAC,CACLA,WAAW,eACVT,IAAA,QAAKgC,SAAS,CAAEvC,MAAM,CAACgE,GAAI,CAAAvB,QAAA,CACxBT,SAAS,CACN,YAAY,CACZ,CAACD,IAAI,CAACkC,MAAM,CACZ,YAAY,CACZlC,IAAI,CAACmC,GAAG,CAAC,SAAAC,KAAA,CAA2B,IAAxB,CAAArC,KAAK,CAAAqC,KAAA,CAALrC,KAAK,CAAEsC,MAAM,CAAAD,KAAA,CAANC,MAAM,CAAEC,EAAE,CAAAF,KAAA,CAAFE,EAAE,CAC3B,mBACE5D,KAAA,CAACb,IAAI,EACHoD,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA/B,cAAc,CAAC,EAAE,CAAC,EAAC,CAElC0B,EAAE,cAAAQ,MAAA,CAAekB,EAAE,CAAG,CACtB9B,SAAS,CAAEvC,MAAM,CAACsE,IAAK,CAAA7B,QAAA,eAEvBlC,IAAA,QACEgC,SAAS,CAAEvC,MAAM,CAACuE,KAAM,CACxBtB,KAAK,CAAE,CAAEC,eAAe,QAAAC,MAAA,CAASiB,MAAM,CAAC,CAAC,CAAC,KAAI,CAAE,CACjD,CAAC,cACF7D,IAAA,QAAKgC,SAAS,CAAEvC,MAAM,CAAC8B,KAAM,CAAAW,QAAA,CAAEX,KAAK,CAAM,CAAC,GARtCuC,EASD,CAAC,CAEX,CAAC,CAAC,CACH,CACN,EACG,CAAC,cACP5D,KAAA,QAAK8B,SAAS,CAAEvC,MAAM,CAACwE,OAAQ,CAAA/B,QAAA,eAC7BlC,IAAA,CAACX,IAAI,EAAC+C,EAAE,CAAE1C,MAAM,CAAC2C,IAAK,CAACL,SAAS,CAAEvC,MAAM,CAACyE,UAAW,CAAAhC,QAAA,cAClDlC,IAAA,QAAKgC,SAAS,CAAEvC,MAAM,CAAC,UAAU,CAAE,CAAAyC,QAAA,cACjClC,IAAA,QAAKgD,SAAS,IAAAJ,MAAA,CAAKK,OAAO,CAACC,GAAG,CAACC,UAAU,qBAAoB,CAAE,CAAC,CAC7D,CAAC,CACF,CAAC,cACPjD,KAAA,CAACb,IAAI,EAAC+C,EAAE,CAAE1C,MAAM,CAACyE,IAAK,CAACnC,SAAS,CAAEvC,MAAM,CAACsB,IAAK,CAAAmB,QAAA,eAC5ClC,IAAA,QAAKgC,SAAS,CAAEvC,MAAM,CAAC,WAAW,CAAE,CAAAyC,QAAA,cAClClC,IAAA,QAAKgD,SAAS,IAAAJ,MAAA,CAAKK,OAAO,CAACC,GAAG,CAACC,UAAU,mBAAkB,CAAE,CAAC,CAC3D,CAAC,CACL,CAAC,CAACpC,IAAI,CAAC2C,MAAM,eACZ1D,IAAA,SAAMgC,SAAS,CAAEvC,MAAM,CAAC2E,KAAM,CAAAlC,QAAA,CAAEnB,IAAI,CAAC2C,MAAM,CAAO,CACnD,EACG,CAAC,EACJ,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAvD,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}