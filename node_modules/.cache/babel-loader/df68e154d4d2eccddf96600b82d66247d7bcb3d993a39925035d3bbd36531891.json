{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Alexander/Desktop/Projects/store/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Alexander/Desktop/Projects/store/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createAsyncThunk,createSlice}from'@reduxjs/toolkit';import axios from'axios';import{BASE_URL}from'../../utils/constants';import{shuffle}from'../../utils/common';export var getProducts=createAsyncThunk('products/getProducts',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_,thunkAPI){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios(\"\".concat(BASE_URL,\"/products\"));case 3:res=_context.sent;return _context.abrupt(\"return\",res.data);case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);return _context.abrupt(\"return\",thunkAPI.rejectWithValue(_context.t0));case 11:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());var initialState={list:[],related:[],filtered:[],isLoading:false};var productsSlice=createSlice({name:'products',initialState:initialState,reducers:{filterByPrice:function filterByPrice(state,_ref2){var payload=_ref2.payload;state.filtered=state.list.filter(function(_ref3){var price=_ref3.price;return price<payload;});},getRelatedProducts:function getRelatedProducts(state,_ref4){var payload=_ref4.payload;var list=state.list.filter(function(_ref5){var id=_ref5.category.id;return id===payload;});state.related=shuffle(list);}},extraReducers:function extraReducers(builder){builder.addCase(getProducts.pending,function(state){state.isLoading=true;});builder.addCase(getProducts.fulfilled,function(state,_ref6){var payload=_ref6.payload;state.list=payload;state.isLoading=false;});builder.addCase(getProducts.rejected,function(state){state.isLoading=false;});}});var _productsSlice$action=productsSlice.actions,filterByPrice=_productsSlice$action.filterByPrice,getRelatedProducts=_productsSlice$action.getRelatedProducts;export{filterByPrice,getRelatedProducts};export default productsSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","BASE_URL","shuffle","getProducts","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_","thunkAPI","res","wrap","_callee$","_context","prev","next","concat","sent","abrupt","data","t0","console","log","rejectWithValue","stop","_x","_x2","apply","arguments","initialState","list","related","filtered","isLoading","productsSlice","name","reducers","filterByPrice","state","_ref2","payload","filter","_ref3","price","getRelatedProducts","_ref4","_ref5","id","category","extraReducers","builder","addCase","pending","fulfilled","_ref6","rejected","_productsSlice$action","actions","reducer"],"sources":["C:/Users/Alexander/Desktop/Projects/store/src/store/products/productsSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\nimport { BASE_URL } from '../../utils/constants';\r\nimport { shuffle } from '../../utils/common';\r\n\r\nexport const getProducts = createAsyncThunk(\r\n  'products/getProducts',\r\n  async (_, thunkAPI) => {\r\n    try {\r\n      const res = await axios(`${BASE_URL}/products`);\r\n      return res.data;\r\n    } catch (error) {\r\n      console.log(error);\r\n      return thunkAPI.rejectWithValue(error);\r\n    }\r\n  }\r\n);\r\n\r\nconst initialState = {\r\n  list: [],\r\n  related: [],\r\n  filtered: [],\r\n  isLoading: false,\r\n};\r\n\r\nconst productsSlice = createSlice({\r\n  name: 'products',\r\n  initialState,\r\n  reducers: {\r\n    filterByPrice: (state, { payload }) => {\r\n      state.filtered = state.list.filter(({ price }) => price < payload);\r\n    },\r\n    getRelatedProducts: (state, { payload }) => {\r\n      const list = state.list.filter(({ category: { id } }) => id === payload);\r\n      state.related = shuffle(list);\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(getProducts.pending, (state) => {\r\n      state.isLoading = true;\r\n    });\r\n    builder.addCase(getProducts.fulfilled, (state, { payload }) => {\r\n      state.list = payload;\r\n      state.isLoading = false;\r\n    });\r\n    builder.addCase(getProducts.rejected, (state) => {\r\n      state.isLoading = false;\r\n    });\r\n  },\r\n});\r\n\r\nexport const { filterByPrice, getRelatedProducts } = productsSlice.actions;\r\n\r\nexport default productsSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}