{"ast":null,"code":"import _objectSpread from\"C:/Users/Alexander/Desktop/Projects/store/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect}from'react';import{useNavigate,useParams}from'react-router-dom';import{useGetProductQuery}from'../../store/api/apiSlice';import{ROUTES}from'../../utils/routes';import Product from'./Product';import Products from'./Products';import{useDispatch,useSelector}from'react-redux';import{getRelatedProducts}from'../../store/products/productsSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SingleProduct=function SingleProduct(){var dispatch=useDispatch();var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var _useSelector=useSelector(function(_ref){var products=_ref.products;return products;}),list=_useSelector.list,related=_useSelector.related;var _useGetProductQuery=useGetProductQuery({id:id}),data=_useGetProductQuery.data,isLoading=_useGetProductQuery.isLoading,isFetching=_useGetProductQuery.isFetching,isSuccess=_useGetProductQuery.isSuccess;useEffect(function(){if(!isFetching&&!isLoading&&!isSuccess){navigate(ROUTES.HOME);}},[isLoading,isFetching,isSuccess]);useEffect(function(){if(!data||!list.length)return;dispatch(getRelatedProducts(data.category.id));},[data,list.length,dispatch]);return!data?/*#__PURE__*/_jsx(\"section\",{className:\"preloader\",children:\"Loading...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Product,_objectSpread({},data)),/*#__PURE__*/_jsx(Products,{products:related,amount:5,title:\"Related products\"})]});};export default SingleProduct;","map":{"version":3,"names":["React","useEffect","useNavigate","useParams","useGetProductQuery","ROUTES","Product","Products","useDispatch","useSelector","getRelatedProducts","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SingleProduct","dispatch","_useParams","id","navigate","_useSelector","_ref","products","list","related","_useGetProductQuery","data","isLoading","isFetching","isSuccess","HOME","length","category","className","children","_objectSpread","amount","title"],"sources":["C:/Users/Alexander/Desktop/Projects/store/src/components/Products/SingleProduct.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { useGetProductQuery } from '../../store/api/apiSlice';\r\nimport { ROUTES } from '../../utils/routes';\r\nimport Product from './Product';\r\nimport Products from './Products';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getRelatedProducts } from '../../store/products/productsSlice';\r\n\r\nconst SingleProduct = () => {\r\n  const dispatch = useDispatch();\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { list, related } = useSelector(({ products }) => products);\r\n  const { data, isLoading, isFetching, isSuccess } = useGetProductQuery({ id });\r\n  useEffect(() => {\r\n    if (!isFetching && !isLoading && !isSuccess) {\r\n      navigate(ROUTES.HOME);\r\n    }\r\n  }, [isLoading, isFetching, isSuccess]);\r\n  useEffect(() => {\r\n    if (!data || !list.length) return;\r\n    dispatch(getRelatedProducts(data.category.id));\r\n  }, [data, list.length, dispatch]);\r\n  return !data ? (\r\n    <section className=\"preloader\">Loading...</section>\r\n  ) : (\r\n    <>\r\n      <Product {...data} />\r\n      <Products products={related} amount={5} title=\"Related products\" />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SingleProduct;\r\n"],"mappings":"8HAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CACzD,OAASC,kBAAkB,KAAQ,0BAA0B,CAC7D,OAASC,MAAM,KAAQ,oBAAoB,CAC3C,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,kBAAkB,KAAQ,oCAAoC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExE,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC1B,GAAM,CAAAC,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,IAAAW,UAAA,CAAehB,SAAS,CAAC,CAAC,CAAlBiB,EAAE,CAAAD,UAAA,CAAFC,EAAE,CACV,GAAM,CAAAC,QAAQ,CAAGnB,WAAW,CAAC,CAAC,CAC9B,IAAAoB,YAAA,CAA0Bb,WAAW,CAAC,SAAAc,IAAA,KAAG,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,OAAO,CAAAA,QAAQ,GAAC,CAAzDC,IAAI,CAAAH,YAAA,CAAJG,IAAI,CAAEC,OAAO,CAAAJ,YAAA,CAAPI,OAAO,CACrB,IAAAC,mBAAA,CAAmDvB,kBAAkB,CAAC,CAAEgB,EAAE,CAAFA,EAAG,CAAC,CAAC,CAArEQ,IAAI,CAAAD,mBAAA,CAAJC,IAAI,CAAEC,SAAS,CAAAF,mBAAA,CAATE,SAAS,CAAEC,UAAU,CAAAH,mBAAA,CAAVG,UAAU,CAAEC,SAAS,CAAAJ,mBAAA,CAATI,SAAS,CAC9C9B,SAAS,CAAC,UAAM,CACd,GAAI,CAAC6B,UAAU,EAAI,CAACD,SAAS,EAAI,CAACE,SAAS,CAAE,CAC3CV,QAAQ,CAAChB,MAAM,CAAC2B,IAAI,CAAC,CACvB,CACF,CAAC,CAAE,CAACH,SAAS,CAAEC,UAAU,CAAEC,SAAS,CAAC,CAAC,CACtC9B,SAAS,CAAC,UAAM,CACd,GAAI,CAAC2B,IAAI,EAAI,CAACH,IAAI,CAACQ,MAAM,CAAE,OAC3Bf,QAAQ,CAACR,kBAAkB,CAACkB,IAAI,CAACM,QAAQ,CAACd,EAAE,CAAC,CAAC,CAChD,CAAC,CAAE,CAACQ,IAAI,CAAEH,IAAI,CAACQ,MAAM,CAAEf,QAAQ,CAAC,CAAC,CACjC,MAAO,CAACU,IAAI,cACVhB,IAAA,YAASuB,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,YAAU,CAAS,CAAC,cAEnDpB,KAAA,CAAAF,SAAA,EAAAsB,QAAA,eACExB,IAAA,CAACN,OAAO,CAAA+B,aAAA,IAAKT,IAAI,CAAG,CAAC,cACrBhB,IAAA,CAACL,QAAQ,EAACiB,QAAQ,CAAEE,OAAQ,CAACY,MAAM,CAAE,CAAE,CAACC,KAAK,CAAC,kBAAkB,CAAE,CAAC,EACnE,CACH,CACH,CAAC,CAED,cAAe,CAAAtB,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}