{"ast":null,"code":"import _objectSpread from\"C:/Users/Alexander/Desktop/Projects/store/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/Alexander/Desktop/Projects/store/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/Alexander/Desktop/Projects/store/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Alexander/Desktop/Projects/store/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createAsyncThunk,createSlice}from'@reduxjs/toolkit';import axios from'axios';import{BASE_URL}from'../../utils/constants';export var createUser=createAsyncThunk('users/createUser',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(payload,thunkAPI){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\".concat(BASE_URL,\"/users\"),payload);case 3:res=_context.sent;return _context.abrupt(\"return\",res.data);case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);return _context.abrupt(\"return\",thunkAPI.rejectWithValue(_context.t0));case 11:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());export var loginUser=createAsyncThunk('users/loginUser',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(payload,thunkAPI){var res,login;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"\".concat(BASE_URL,\"/auth/login\"),payload);case 3:res=_context2.sent;_context2.next=6;return axios(\"\".concat(BASE_URL,\"/auth/profile\"),{headers:{Authorization:\"Bearer \".concat(res.data.access_token)}});case 6:login=_context2.sent;return _context2.abrupt(\"return\",login.data);case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);return _context2.abrupt(\"return\",thunkAPI.rejectWithValue(_context2.t0));case 14:case\"end\":return _context2.stop();}},_callee2,null,[[0,10]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());export var updateUser=createAsyncThunk('users/updateUser',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(payload,thunkAPI){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.put(\"\".concat(BASE_URL,\"/users/\").concat(payload.id),payload);case 3:res=_context3.sent;return _context3.abrupt(\"return\",res.data);case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);return _context3.abrupt(\"return\",thunkAPI.rejectWithValue(_context3.t0));case 11:case\"end\":return _context3.stop();}},_callee3,null,[[0,7]]);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}());var addCurrentUser=function addCurrentUser(state,_ref4){var payload=_ref4.payload;state.currentUser=payload;};var initialState={currentUser:null,cart:[],isLoading:false,formType:'signup',showForm:false};var userSlice=createSlice({name:'user',initialState:initialState,reducers:{addItemToCart:function addItemToCart(state,_ref5){var payload=_ref5.payload;var newCart=_toConsumableArray(state.cart);var found=state.cart.find(function(_ref6){var id=_ref6.id;return id===payload.id;});if(found){newCart=newCart.map(function(item){return item.id===payload.id?_objectSpread(_objectSpread({},item),{},{quantity:payload.quantity||item.quantity+1}):item;});}else newCart.push(_objectSpread(_objectSpread({},payload),{},{quantity:1}));state.cart=newCart;},removeItemFromCart:function removeItemFromCart(state,_ref7){var payload=_ref7.payload;state.cart=state.cart.filter(function(_ref8){var id=_ref8.id;return id!==payload;});},toggleForm:function toggleForm(state,_ref9){var payload=_ref9.payload;state.showForm=payload;},toggleFormType:function toggleFormType(state,_ref10){var payload=_ref10.payload;state.formType=payload;}},extraReducers:function extraReducers(builder){builder.addCase(createUser.fulfilled,addCurrentUser);builder.addCase(loginUser.fulfilled,addCurrentUser);builder.addCase(updateUser.fulfilled,addCurrentUser);}});export default userSlice.reducer;var _userSlice$actions=userSlice.actions,addItemToCart=_userSlice$actions.addItemToCart,toggleForm=_userSlice$actions.toggleForm,toggleFormType=_userSlice$actions.toggleFormType,removeItemFromCart=_userSlice$actions.removeItemFromCart;export{addItemToCart,toggleForm,toggleFormType,removeItemFromCart};","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","BASE_URL","createUser","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","payload","thunkAPI","res","wrap","_callee$","_context","prev","next","post","concat","sent","abrupt","data","t0","console","log","rejectWithValue","stop","_x","_x2","apply","arguments","loginUser","_ref2","_callee2","login","_callee2$","_context2","headers","Authorization","access_token","_x3","_x4","updateUser","_ref3","_callee3","_callee3$","_context3","put","id","_x5","_x6","addCurrentUser","state","_ref4","currentUser","initialState","cart","isLoading","formType","showForm","userSlice","name","reducers","addItemToCart","_ref5","newCart","_toConsumableArray","found","find","_ref6","map","item","_objectSpread","quantity","push","removeItemFromCart","_ref7","filter","_ref8","toggleForm","_ref9","toggleFormType","_ref10","extraReducers","builder","addCase","fulfilled","reducer","_userSlice$actions","actions"],"sources":["C:/Users/Alexander/Desktop/Projects/store/src/store/user/userSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\nimport { BASE_URL } from '../../utils/constants';\r\n\r\nexport const createUser = createAsyncThunk(\r\n  'users/createUser',\r\n  async (payload, thunkAPI) => {\r\n    try {\r\n      const res = await axios.post(`${BASE_URL}/users`, payload);\r\n      return res.data;\r\n    } catch (error) {\r\n      console.log(error);\r\n      return thunkAPI.rejectWithValue(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const loginUser = createAsyncThunk(\r\n  'users/loginUser',\r\n  async (payload, thunkAPI) => {\r\n    try {\r\n      const res = await axios.post(`${BASE_URL}/auth/login`, payload);\r\n      const login = await axios(`${BASE_URL}/auth/profile`, {\r\n        headers: {\r\n          Authorization: `Bearer ${res.data.access_token}`,\r\n        },\r\n      });\r\n      return login.data;\r\n    } catch (error) {\r\n      console.log(error);\r\n      return thunkAPI.rejectWithValue(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const updateUser = createAsyncThunk(\r\n  'users/updateUser',\r\n  async (payload, thunkAPI) => {\r\n    try {\r\n      const res = await axios.put(`${BASE_URL}/users/${payload.id}`, payload);\r\n      return res.data;\r\n    } catch (error) {\r\n      console.log(error);\r\n      return thunkAPI.rejectWithValue(error);\r\n    }\r\n  }\r\n);\r\n\r\nconst addCurrentUser = (state, { payload }) => {\r\n  state.currentUser = payload;\r\n};\r\n\r\nconst initialState = {\r\n  currentUser: null,\r\n  cart: [],\r\n  isLoading: false,\r\n  formType: 'signup',\r\n  showForm: false,\r\n};\r\n\r\nconst userSlice = createSlice({\r\n  name: 'user',\r\n  initialState,\r\n  reducers: {\r\n    addItemToCart: (state, { payload }) => {\r\n      let newCart = [...state.cart];\r\n      const found = state.cart.find(({ id }) => id === payload.id);\r\n      if (found) {\r\n        newCart = newCart.map((item) => {\r\n          return item.id === payload.id\r\n            ? { ...item, quantity: payload.quantity || item.quantity + 1 }\r\n            : item;\r\n        });\r\n      } else newCart.push({ ...payload, quantity: 1 });\r\n      state.cart = newCart;\r\n    },\r\n    removeItemFromCart: (state, { payload }) => {\r\n      state.cart = state.cart.filter(({ id }) => id !== payload);\r\n    },\r\n    toggleForm: (state, { payload }) => {\r\n      state.showForm = payload;\r\n    },\r\n    toggleFormType: (state, { payload }) => {\r\n      state.formType = payload;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(createUser.fulfilled, addCurrentUser);\r\n    builder.addCase(loginUser.fulfilled, addCurrentUser);\r\n    builder.addCase(updateUser.fulfilled, addCurrentUser);\r\n  },\r\n});\r\n\r\nexport default userSlice.reducer;\r\n\r\nexport const { addItemToCart, toggleForm, toggleFormType, removeItemFromCart } =\r\n  userSlice.actions;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}